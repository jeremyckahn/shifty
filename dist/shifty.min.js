/** @license
 * Shifty <http://jeremyckahn.github.com/shifty/>
 * Description: A teeny tiny tweening engine in JavaScript. That's all it does.
 * Author: Jeremy Kahn - jeremyckahn@gmail.com
 * License: MIT
 * Version: 0.8.0 (Mon, 19 Nov 2012 23:10:45 GMT)
 */
(function(){var e;(function(t){"use strict";function s(e,t){var n;for(n in e)Object.hasOwnProperty.call(e,n)&&t(n)}function o(e,t){return s(t,function(n){e[n]=t[n]}),e}function u(e,t){return s(t,function(n){typeof e[n]=="undefined"&&(e[n]=t[n])}),e}function a(e,t,n,r,i,s,o){var u=(e-s)/i,a;for(a in t)t.hasOwnProperty(a)&&r.hasOwnProperty(a)&&(t[a]=f(n[a],r[a],v[o[a]],u));return t}function f(e,t,n,r){return e+(t-e)*n(r)}function l(t,n,r){var i=e.prototype.filter;s(i,function(e){i[e][n]&&i[e][n].apply(t,r)})}function c(e,t,n,r,s,o,u,f){var h=t+n,p=Math.min(i(),h),d=p>=h;e._isTweening&&(d||(e._loopId=setTimeout(function(){c(e,t,n,r,s,o,u,f)},1e3/e.fps)),l(e,"beforeTween",[r,s,o,u]),a(p,r,s,o,n,t,u),l(e,"afterTween",[r,s,o,u]),f&&f.call(r,r)),(d||!e._isTweening)&&e.stop(!0)}function h(e,t){var r={};return typeof t=="string"?s(e,function(e){r[e]=t}):s(e,function(e){r[e]||(r[e]=t[e]||n)}),r}var n="linear",r=500,i=function(){return+(new Date)},p;e=function(e){return e=e||{},this.data={},this._currentState=e.initialState||{},this.fps=e.fps||30,this._easing=e.easing||n,this};var d;e.prototype.tween=function(e,t,s,a,f){if(this._isTweening)return;this._loopId=0,this._pausedAtTime=null;if(arguments.length>1)this._targetState=t||{},this._duration=s||r,this._callback=a,this._easing=f||n,this._currentState=e||{};else{var c=e;this._step=c.step,this._callback=c.callback,this._targetState=c.to||c.target||{},this._duration=c.duration||r,this._easing=c.easing||n,this._currentState=c.from||{}}this._timestamp=i();var p=this._currentState,d=this._targetState;u(p,d),u(d,p),this._easing=h(p,this._easing);var v=this._originalState=o({},p);return l(this,"tweenCreated",[p,v,d,this._easing]),this._isTweening=!0,this.resume(),e.start&&e.start(),this},e.prototype.to=function(t,n,r,i){return arguments.length===1?"to"in t?(t.from=this.get(),this.tween(t)):this.tween(this.get(),t):this.tween(this.get(),t,n,r,i),this},e.prototype.get=function(){return o({},this._currentState)},e.prototype.set=function(e){this._currentState=e},e.prototype.stop=function(e){return clearTimeout(this._loopId),this._isTweening=!1,e&&(o(this._currentState,this._targetState),l(this,"afterTweenEnd",[this._currentState,this._originalState,this._targetState,this._easing]),this._callback&&this._callback.call(this._currentState,this._currentState)),this},e.prototype.pause=function(){return clearTimeout(this._loopId),this._pausedAtTime=i(),this._isPaused=!0,this},e.prototype.resume=function(){return this._isPaused&&(this._timestamp+=i()-this._pausedAtTime),c(this,this._timestamp,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step),this},e.prototype.filter={},o(e,{now:i,each:s,tweenProps:a,tweenProp:f,applyFilter:l,shallowCopy:o,defaults:u,composeEasingObject:h});var v=e.prototype.formula={linear:function(e){return e}};typeof exports=="object"?module.exports=e:typeof define=="function"&&define.amd?define(function(){return e}):typeof t.Tweenable=="undefined"&&(t.Tweenable=e)})(this),function(){e.shallowCopy(e.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-0.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-0.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return-Math.cos(e*(Math.PI/2))+1},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-0.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return e==0?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return e==1?1:-Math.pow(2,-10*e)+1},easeInOutExpo:function(e){return e==0?0:e==1?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*e*e*(((t*=1.525)+1)*e-t):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((e*6-1)*2*Math.PI/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?.5*e*e*(((t*=1.525)+1)*e-t):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},swingFrom:function(e){var t=1.70158;return e*e*((t+1)*e-t)},swingTo:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-0.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}})}(),function(){function t(t,n,r,i,s){return e.tweenProps(i,n,t,r,1,0,s)}function n(t,n){var r=n;return typeof n=="string"&&(r={},e.each(t,function(e){r[e]=t[e]})),r}e.interpolate=function(n,r,i,s){var o,u,a;n&&n.from&&(r=n.to,i=n.position,s=n.easing,n=n.from),a=new e,a.easing=s||"linear",o=e.shallowCopy({},n);var f=e.composeEasingObject(n,a.easing);return e.applyFilter(a,"tweenCreated",[o,n,r,f]),e.applyFilter(a,"beforeTween",[o,n,r,f]),u=t(n,o,r,i,f),e.applyFilter(a,"afterTween",[u,n,r,f]),u},e.prototype.interpolate=function(t,n,r){var i;return i=e.interpolate(this.get(),t,n,r),this.set(i),i}}(),function(e){function a(e,t){var n=e.length,r,i=[];for(r=0;r<n;r++)i.push("_"+t+"_"+r);return i}function f(e){var t=e.match(n);return t.length===1&&t.unshift(""),t.join(u)}function l(t){e.each(t,function(e){var n=t[e];typeof n=="string"&&n.match(o)&&(t[e]=c(n))})}function c(e){return v(o,e,h)}function h(e){var t=p(e);return"rgb("+t[0]+","+t[1]+","+t[2]+")"}function p(e){return e=e.replace(/#/,""),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[d(e.substr(0,2)),d(e.substr(2,2)),d(e.substr(4,2))]}function d(e){return parseInt(e,16)}function v(e,t,n){var r=t.match(e),i=t.replace(e,u);if(r){var s=r.length,o;for(var a=0;a<s;a++)o=r.shift(),i=i.replace(u,n(o))}return i}function m(e){return v(i,e,g)}function g(e){var t=e.match(r),n=t.length,i=e.match(s)[0];for(var o=0;o<n;o++)i+=parseInt(t[o],10)+",";return i=i.slice(0,-1)+")",i}function y(t){var n={};return e.each(t,function(e){var r=t[e];if(typeof r=="string"){var i=T(r);n[e]={formatString:f(r),chunkNames:a(i,e)}}}),n}function b(t,n){e.each(n,function(e){var r=t[e],i=T(r),s=i.length;for(var o=0;o<s;o++)t[n[e].chunkNames[o]]=+i[o];delete t[e]})}function w(t,n){e.each(n,function(e){var r=t[e],i=E(t,n[e].chunkNames),s=S(i,n[e].chunkNames);r=x(n[e].formatString,s),t[e]=m(r)})}function E(e,t){var n={},r,i=t.length;for(var s=0;s<i;s++)r=t[s],n[r]=e[r],delete e[r];return n}function S(e,t){var n=[],r=t.length;for(var i=0;i<r;i++)n.push(e[t[i]]);return n}function x(e,t){var n=e,r=t.length;for(var i=0;i<r;i++)n=n.replace(u,+t[i].toFixed(4));return n}function T(e){return e.match(r)}function N(t,n){e.each(n,function(e){var r=n[e],i=r.chunkNames,s=i.length,o=t[e].split(" "),u=o[o.length-1];for(var a=0;a<s;a++)t[i[a]]=o[a]||u;delete t[e]})}function C(t,n){e.each(n,function(e){var r=n[e],i=r.chunkNames,s=i.length,o="";for(var u=0;u<s;u++)o+=" "+t[i[u]],delete t[i[u]];o=o.substr(1),t[e]=o})}var t,n=/([^-0-9\.]+)/g,r=/[0-9.-]+/g,i=new RegExp("rgb\\("+r.source+",s*"+r.source+",s*"+r.source+"\\)","g"),s=/^.*\(/,o=/#([0-9]|[a-f]){3,6}/g,u="VAL";e.prototype.filter.token={tweenCreated:function(e,t,n,r){l(e),l(t),l(n),this._tokenData=y(e)},beforeTween:function(e,t,n,r){N(r,this._tokenData),b(e,this._tokenData),b(t,this._tokenData),b(n,this._tokenData)},afterTween:function(e,t,n,r){w(e,this._tokenData),w(t,this._tokenData),w(n,this._tokenData),C(r,this._tokenData)}}}(e)})()